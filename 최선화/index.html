<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>

        <link rel="stylesheet" href="assets/css/reset.css" />
        <link rel="stylesheet" href="assets/css/style.css" />
        <style>
            #particles {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                z-index: 10;
                filter: url("#goo");
            }

            svg {
                display: block;
                width: 30px;
                height: 30px;
                position: absolute;
                transform: translateZ(0px);
                fill: #0038e9;
            }
        </style>
    </head>

    <body>
        <header id="header">
            <h1>Creative<span>Dev</span></h1>
            <nav>menu</nav>
        </header>
        <!-- //header -->

        <section id="section1">
            <div class="text">
                <div class="t1 split">the</div>
                <div class="t2 split">createive</div>
                <div class="t3 split">portfolio</div>
            </div>
            <div id="particles"></div>
            <svg>
                <defs>
                    <filter id="goo">
                        <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="12" />
                        <feColorMatrix
                            in="blur"
                            result="colormatrix"
                            type="matrix"
                            values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 21 -9"
                        />
                        <feBlend in="SourceGraphic" in2="colormatrix" />
                    </filter>
                </defs>
            </svg>
        </section>
        <!-- //section1 -->

        <section id="section2">
            <div class="circle c1"></div>
            <div class="circle c2"></div>
            <div class="circle c3"></div>
            <div class="circle c4"></div>
            <div class="circle c5"></div>
            <p class="desc">
                안녕하세요!<br />어떤 일이라도 노력하고 즐기면 그 결과는 빛을 바란다고 생각합니다. <br />신입의 열정과
                도전정신을 깊숙히 새기며 배움에 있어 겸손함을 유지하며 <br />세부적인 곳까지 파고드는 개발자가
                되겠습니다.
            </p>
        </section>
        <!-- //section2 -->

        <section id="section3">
            <div class="container">
                <div class="ct1">coding</div>
                <div class="ct2">blog</div>
                <div class="ct3">team</div>
            </div>
        </section>
        <!-- //section3 -->

        <section id="section4"></section>
        <!-- //section4 -->

        <section id="section5">
            <div class="container">
                <div class="sec5__inner">
                    <p class="sub"><span class="dot"></span>6개월 동안 작업한 작업물입니다.</p>
                    <div class="article a1">
                        <div class="imgWrap">
                            <div class="img parallax__item__img"></div>
                            <div class="link">
                                <a href="#">사이트 보기</a>
                                <a href="#">소스 보기</a>
                            </div>
                        </div>
                        <h3 class="title dotWrap"><span class="dot w15"></span>지난 6개월간의 기록.</h3>
                        <p>
                            이 사이트는 HTML5, CSS3, 그리고 JAVASCRIPT를 사용하여 개발했습니다.<br />6개월 동안 제작한
                            사이트들이 아이콘 형태로 모여 있어, 각 사이트로 쉽게 접근할 수 있습니다.
                        </p>
                        <p>
                            처음엔 힘들었지만.. 어떻게 해서 이렇게 만들고 저러허게 만들었습니다. <br />재밌고.
                            재밌었습니다. 이렇게 해서 저러허게 해써 했습니다.<br />
                            이런식으로 함다면 개발자가 되서 이렇게 하겠습니다.
                        </p>
                    </div>
                </div>
                <!-- //article1 -->
                <div class="article2 parallax__item__desc">
                    <div class="imgWrap">
                        <div class="img parallax__item__img"></div>
                        <div class="link">
                            <a href="#">사이트 보기</a>
                            <a href="#">소스 보기</a>
                        </div>
                    </div>
                    <h3 class="title dotWrap"><span class="dot right w15"></span>웹표준 코딩을 하다보면서.</h3>
                    <p>
                        이 사이트는 HTML5, CSS3, 그리고 JAVASCRIPT를 사용하여 개발했습니다.<br />6개월 동안 제작한
                        사이트들이 아이콘 형태로 모여 있어, 각 사이트로 쉽게 접근할 수 있습니다.
                    </p>
                    <p>
                        처음엔 힘들었지만.. 어떻게 해서 이렇게 만들고 저러허게 만들었습니다. <br />재밌고. 재밌었습니다.
                        이렇게 해서 저러허게 해써 했습니다.<br />
                        이런식으로 함다면 개발자가 되서 이렇게 하겠습니다.
                    </p>
                </div>
                <!-- //article2 -->
            </div>
        </section>
        <!-- //section5 -->

        <section id="section6"></section>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1/bundled/lenis.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://unpkg.com/split-type"></script>

        <script>
            gsap.registerPlugin(ScrollTrigger);
            const lenis = new Lenis({
                duration: 1.2,
                easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            });
            function raf(time) {
                lenis.raf(time);
                requestAnimationFrame(raf);
            }
            requestAnimationFrame(raf);

            const targets = gsap.utils.toArray(".split");
            let SplitClient = new SplitType(targets, { type: "lines, words, chars" });
            let lines = SplitClient.lines;
            let words = SplitClient.words;
            let chars = SplitClient.chars;
        </script>

        <script>
            gsap.set("#particles", { opacity: 0 });
            gsap.set(".text .t1 .char", { opacity: 0, x: -100 });
            gsap.set(".text .t2 .char", { opacity: 0, x: -10, scale: 0.8 });
            gsap.set(".text .t3 .char", { opacity: 0, y: 20 });
            gsap.set("#header", { top: -150 });

            const tl = gsap.timeline();
            setTimeout(() => {
                tl.to(".text .t1 .char", { opacity: 1, x: 0 });
                tl.to(".text .t2 .char", { opacity: 1, x: 0, stagger: 0.06, scale: 1, ease: "circ.out" });
                tl.to(".text .t3 .char", { opacity: 1, y: 0, duration: 0.4 });
                tl.to("#header", { top: 0, ease: "circ.out" });
                tl.to("#particles", { opacity: 1, duration: 1 });
            }, 3000);

            gsap.set("#section2 .c5", { opacity: 0 });
            gsap.set("#section2 .desc", { opacity: 0 });

            const ani2 = gsap.timeline();

            ani2.to("#section2 .c1", { x: 0, y: 0 }, "a");
            ani2.to("#section2 .c2", { x: 0, y: 0 }, "a");
            ani2.to("#section2 .c3", { x: 0, y: 0 }, "a");
            ani2.to("#section2 .c4", { x: 0, y: 0 }, "a");
            ani2.to("#section2 .c5", { opacity: 1 });
            ani2.to("#section2 .desc", { opacity: 1 });

            ScrollTrigger.create({
                animation: ani2,
                trigger: "#section2",
                start: "top top",
                end: "+=2000",
                scrub: true,
                pin: true,
                anticipatePin: 1,
                markers: false,
            });

            // 미디어 쿼리 객체 생성
            const mediaQuery = window.matchMedia("(min-width: 960px)");

            function applyParallaxEffect() {
                // 애니메이션 적용
                gsap.utils.toArray(".parallax__item__img").forEach((item) => {
                    if (item.scrollTrigger) {
                        item.scrollTrigger.kill();
                    }

                    gsap.to(item, {
                        yPercent: mediaQuery.matches ? -40 : 0,
                        ease: "none",
                        duration: 0.5,
                        scrollTrigger: {
                            trigger: item,
                            start: "top bottom",
                            end: "bottom top",
                            markers: true,
                            scrub: 0.5,
                        },
                    });
                });
                gsap.utils.toArray(".parallax__item__desc").forEach((item) => {
                    if (item.scrollTrigger) {
                        item.scrollTrigger.kill();
                    }

                    gsap.to(item, {
                        yPercent: mediaQuery.matches ? -80 : 0,
                        ease: "none",
                        duration: 0.5,
                        scrollTrigger: {
                            trigger: item,
                            start: "top bottom",
                            end: "bottom top",
                            markers: true,
                            scrub: 0.5,
                        },
                    });
                });

                ScrollTrigger.refresh();
            }

            // 처음 로드 시 실행
            applyParallaxEffect();

            // 화면 크기가 변경될 때마다 실행
            mediaQuery.addEventListener("resize", applyParallaxEffect);
        </script>

        <script>
            const circle = '<svg viewBox="0 0 67.4 67.4"><circle class="circle" cx="33.7" cy="33.7" r="33.7"/></svg>';

            class Particle {
                constructor(svg, coordinates, friction) {
                    this.svg = svg;
                    this.steps = $(window).height() / 2;
                    this.item = null;
                    this.friction = friction;
                    this.coordinates = coordinates;
                    this.position = this.coordinates.y;
                    this.dimensions = this.render();
                    this.move();
                    this.rotation = Math.random() > 0.5 ? "-" : "+";
                    this.scale = 0.4 + Math.random() * 2;
                    this.siner = ($(window).width() / 2.5) * Math.random();
                }
                destroy() {
                    this.item.remove();
                }

                move() {
                    this.position = this.position - this.friction;
                    let top = this.position;
                    let left = this.coordinates.x + Math.sin((this.position * Math.PI) / this.steps) * this.siner;
                    this.item.css({
                        transform:
                            "translateX(" +
                            left +
                            "px) translateY(" +
                            top +
                            "px) scale(" +
                            this.scale +
                            ") rotate(" +
                            this.rotation +
                            (this.position + this.dimensions.height) +
                            "deg)",
                    });

                    if (this.position < -this.dimensions.height) {
                        this.destroy();
                        return false;
                    } else {
                        return true;
                    }
                }

                render() {
                    this.item = $(this.svg, {
                        css: {
                            transform:
                                "translateX(" + this.coordinates.x + "px) translateY(" + this.coordinates.y + "px)",
                        },
                    });
                    $("#particles").append(this.item);
                    return {
                        width: this.item.width(),
                        height: this.item.height(),
                    };
                }
            }

            let isPaused = false;
            window.onblur = function () {
                isPaused = true;
            }.bind(this);
            window.onfocus = function () {
                isPaused = false;
            }.bind(this);

            //-------------------------------
            let particles = [];

            setInterval(function () {
                if (!isPaused) {
                    particles.push(
                        new Particle(
                            circle,
                            {
                                x: Math.random() * $(window).width(),
                                y: $(window).height() + 100,
                            },
                            1 + Math.random()
                        )
                    );
                }
            }, 880);

            function update() {
                particles = particles.filter(function (p) {
                    return p.move();
                });
                requestAnimationFrame(update.bind(this));
            }
            update();
        </script>
    </body>
</html>
